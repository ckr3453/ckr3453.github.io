---
title: "ì´í™í‹°ë¸Œìë°” - ì•„ì´í…œ17) ë³€ê²½ ê°€ëŠ¥ì„±ì„ ìµœì†Œí™”í•˜ë¼."
categories: 
    - book
date: 2023-04-05
last_modified_at: 2023-04-05
toc: true
toc_sticky: true
excerpt: "ë³€ê²½ì ìµœì†Œí™”í•˜ê¸°"
---

## ê°œìš”

í´ë˜ìŠ¤ë¥¼ ê°€ë³€ìœ¼ë¡œ ë‘˜ ì´ìœ ê°€ ì—†ë‹¤ë©´ ë¶ˆë³€ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ë³€ê²½ ê°€ëŠ¥ì„±ì„ ìµœì†Œí™” í•˜ì.

ë¶ˆë³€ í´ë˜ìŠ¤ëŠ” ê°€ë³€ í´ë˜ìŠ¤ë³´ë‹¤ ì„¤ê³„, êµ¬í˜„, ì‚¬ìš©ì— ìš©ì´í•˜ë©° ì˜¤ë¥˜ê°€ ìƒê¸¸ ì—¬ì§€ë„ ì ê³  í›¨ì”¬ ì•ˆì „í•˜ë‹¤.

## í´ë˜ìŠ¤ë¥¼ ë¶ˆë³€ìœ¼ë¡œ ë§Œë“¤ê¸°

í´ë˜ìŠ¤ë¥¼ ë¶ˆë³€ìœ¼ë¡œ ë§Œë“¤ë•Œ ë‹¤ìŒì˜ ë‹¤ì„¯ê°€ì§€ ê·œì¹™ì„ ë”°ë¥´ì.

- ê°ì²´ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ë©”ì„œë“œë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤
  - `setter` ë“±
- í´ë˜ìŠ¤ë¥¼ í™•ì¥í•  ìˆ˜ ì—†ë„ë¡ ë§Œë“ ë‹¤.
  - í™•ì¥ìœ¼ë¡œ ì¸í•˜ì—¬ ê°ì²´ì˜ ìƒíƒœê°€ ë³€í• ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
- ëª¨ë“  í•„ë“œë¥¼ `final`ë¡œ ì„ ì–¸í•œë‹¤.
- ëª¨ë“  í•„ë“œë¥¼ `private`ìœ¼ë¡œ ì„ ì–¸í•œë‹¤.
- ìì‹  ì™¸ì—ëŠ” ë‚´ë¶€ì˜ ê°€ë³€ ì»´í¬ë„ŒíŠ¸ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë„ë¡ êµ¬ì„±í•œë‹¤.

ì´ìƒ ë‹¤ì„¯ê°€ì§€ ê·œì¹™ì„ ì ìš©í•˜ì—¬ ë§Œë“  ì˜ˆì‹œ ë¶ˆë³€ í´ë˜ìŠ¤ì´ë‹¤.

```java
// ë³µì†Œìˆ˜ë¥¼ í‘œí˜„í•œ í´ë˜ìŠ¤
public final class Complex {
    private final double re;  // ì‹¤ìˆ˜ë¶€
    private final double im;  // í—ˆìˆ˜ë¶€

    public static final Complex ZERO = new Complex(0, 0);
    public static final Complex ONE  = new Complex(1, 0);
    public static final Complex I    = new Complex(0, 1);

    private Complex(double re, double im) {
        this.re = re;
        this.im = im;
    }

    // private ìƒì„±ìì™€ í•¨ê»˜ ì‚¬ìš©í•´ì•¼ í•œë‹¤. (ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ)
    public static Complex valueOf(double re, double im) {
        return new Complex(re, im);
    }

    public double realPart()      { return re; }
    public double imaginaryPart() { return im; }

    // ì¸ìŠ¤í„´ìŠ¤ ìì‹ ì„ ìˆ˜ì •í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë°˜í™˜í•œë‹¤.
    public Complex plus(Complex c) {
        return new Complex(re + c.re, im + c.im);
    }

    public Complex minus(Complex c) {
        return new Complex(re - c.re, im - c.im);
    }

    public Complex times(Complex c) {
        return new Complex(re * c.re - im * c.im,
                re * c.im + im * c.re);
    }

    public Complex dividedBy(Complex c) {
        double tmp = c.re * c.re + c.im * c.im;
        return new Complex((re * c.re + im * c.im) / tmp,
                (im * c.re - re * c.im) / tmp);
    }

    @Override 
    public boolean equals(Object o) {
        if (o == this)
            return true;
        if (!(o instanceof Complex))
            return false;
        Complex c = (Complex) o;
        return Double.compare(c.re, re) == 0
                && Double.compare(c.im, im) == 0;
    }
    @Override 
    public int hashCode() {
        return 31 * Double.hashCode(re) + Double.hashCode(im);
    }

    @Override 
    public String toString() {
        return "(" + re + " + " + im + "i)";
    }
}
```

## ë¶ˆë³€ ê°ì²´ëŠ” ìŠ¤ë ˆë“œ ì•ˆì „(thread-safe)í•˜ë‹¤

ë¶ˆë³€ ê°ì²´ëŠ” ê·¼ë³¸ì ìœ¼ë¡œ ìŠ¤ë ˆë“œ ì•ˆì „í•˜ì—¬ ë”°ë¡œ ë™ê¸°í™”í•  í•„ìš”ê°€ ì—†ë‹¤.

ë•Œë¬¸ì— ì•ˆì‹¬í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆìœ¼ë©° ìì£¼ ì‚¬ìš©í•˜ëŠ” ê°’ë“¤ì€ ë‹¤ìŒê³¼ ê°™ì´ ìƒìˆ˜ë¡œ ì œê³µí•˜ì—¬ ì¬í™œìš© í•  ìˆ˜ ìˆë‹¤.

```java
public static final Complex ZERO = new Complex(0, 0);
public static final Complex ONE  = new Complex(1, 0);
public static final Complex I    = new Complex(0, 1);
```

ì´ëŸ¬í•œ ê°œë…ìœ¼ë¡œ public ìƒì„±ì ëŒ€ì‹  ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œë¥¼ ì œê³µí•˜ì—¬ ìºì‹œ ê¸°ëŠ¥ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆë‹¤.

## ë¶ˆë³€ ê°ì²´ë¼ë¦¬ëŠ” ë‚´ë¶€ ë°ì´í„°ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë‹¤.

ë¶ˆë³€ ê°ì²´ë¼ë¦¬ëŠ” ê°€ë³€ ê°ì²´ì—¬ë„ ë³µì‚¬(clone)í•˜ì§€ ì•Šê³  ì›ë³¸ ì¸ìŠ¤í„´ìŠ¤ì™€ ê³µìœ í•´ë„ ëœë‹¤. (ì–´ì°¨í”¼ ì™¸ë¶€ì— ì˜í•´ ìƒíƒœê°€ ë³€í•  ì¼ì´ ì—†ìœ¼ë‹ˆ)

ì˜ˆì‹œë¡œ `BigInteger` í´ë˜ìŠ¤ì˜ `negate()` ë©”ì„œë“œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì›ë³¸ ì¸ìŠ¤í„´ìŠ¤ì˜ ë‚´ë¶€ ë°°ì—´ì„ ê·¸ëŒ€ë¡œ ê°€ë¥´í‚¨ë‹¤.

```java
public class BigInteger extends Number implements Comparable<BigInteger> {
  final int signum; // ë¶€í˜¸
  final int[] mag;  // í¬ê¸°(ì ˆëŒ“ê°’)
  ...

  BigInteger(int[] magnitude, int signum) {
    // package-private ìœ¼ë¡œ ìƒì„±ìê°€ êµ¬ì„±ë˜ì–´ ìˆì–´ì„œ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ë¶ˆê°€ëŠ¥
    this.signum = (magnitude.length == 0 ? 0 : signum);
    this.mag = magnitude;
    if (mag.length >= MAX_MAG_LENGTH) {
        checkRange();
    }
  }

  public BigInteger negate() {
    // í¬ê¸°ëŠ” ê°™ê³  ë¶€í˜¸ë§Œ ë°˜ëŒ€ì¸ ìƒˆë¡œìš´ BigIntegerë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œ
    // this ë¥¼ í†µí•´ ì›ë³¸ ì¸ìŠ¤í„´ìŠ¤ì˜ ë¶€í˜¸ì™€ í¬ê¸°ë¥¼ ê·¸ëŒ€ë¡œ ê°€ì ¸ë‹¤ ì“´ë‹¤.
    return new BigInteger(this.mag, -this.signum);
  }
  ..
}
```

## ê°ì²´ë¥¼ ë§Œë“¤ë•Œ ë‹¤ë¥¸ ë¶ˆë³€ ê°ì²´ë“¤ì„ êµ¬ì„±ìš”ì†Œë¡œ ì‚¬ìš©í•˜ë©´ ì´ì ì´ ë§ë‹¤.

ë‚´ë¶€ êµ¬ì¡°ê°€ ë³µì¡í•œ ê°ì²´ì—¬ë„ êµ¬ì„±ìš”ì†Œë“¤ì´ ë¶ˆë³€ê°ì²´ë¡œ ì´ë¤„ì ¸ ìˆìœ¼ë©´ ë¶ˆë³€ì‹ì„ ìœ ì§€í•˜ê¸° í›¨ì”¬ ìˆ˜ì›”í•˜ë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, `Map`ì˜ Keyë‚˜ `Set`ì˜ êµ¬ì„±ìš”ì†Œë¡œ í™œìš© ê°€ëŠ¥í•˜ë‹¤. 

í•´ë‹¹ ì»¬ë ‰ì…˜ì˜ êµ¬ì„±ìš”ì†Œê°€ ë°”ë€Œë©´ ë¶ˆë³€ì‹ì´ ë¬´ë„ˆì§€ëŠ” ê²½ìš°ê°€ ë°œìƒí•˜ì—¬ ë¬¸ì œë¥¼ ì•¼ê¸°í•˜ì§€ë§Œ ë¶ˆë³€ ê°ì²´ëŠ” ê·¸ëŸ´ì¼ì´ ì—†ë‹¤.

(ex. ë¶ˆë³€ì‹ì´ ë³´ì¥ë˜ì§€ ì•Šì•„ ë™ì¼í•œ ì˜ë¯¸ì˜ `Map`ì˜ Keyë‚˜ `Set`ì˜ êµ¬ì„±ìš”ì†Œê°€ 2ê°œì´ìƒì´ ë ìˆ˜ ìˆë‹¤ë©´..?)

## ë¶ˆë³€ ê°ì²´ëŠ” ê·¸ ìì²´ë¡œ ì‹¤íŒ¨ ì›ìì„±ì„ ì œê³µí•œë‹¤

> ì‹¤íŒ¨ ì›ìì„±ì´ë€? ë©”ì„œë“œì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•œ í›„ì—ë„ ê·¸ ê°ì²´ëŠ” ì „ê³¼ ë™ì¼í•˜ê²Œ ì—¬ì „íˆ ìœ íš¨í•œ ìƒíƒœì—¬ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ë‹¤.

ìƒíƒœê°€ ë³€í•˜ì§€ ì•Šìœ¼ë‹ˆ ì ê¹ì´ë¼ë„ ë¶ˆì¼ì¹˜ ìƒíƒœì— ë¹ ì§ˆ ê°€ëŠ¥ì„±ì´ ì—†ë‹¤ëŠ” ì˜ë¯¸ë‹¤.

## ë¶ˆë³€ ê°ì²´ëŠ” ê°’ì´ ë‹¤ë¥´ë©´ ë°˜ë“œì‹œ ë…ë¦½ëœ ê°ì²´ë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤.

ê°’ì„ ë§Œë“¤ìˆ˜ ìˆëŠ” ê°€ì§“ìˆ˜ê°€ ë§ë‹¤ë©´ (ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ìœ¼ë‹ˆ) ëª¨ë‘ ê°ê° ë§Œë“¤ì–´ì•¼ í•˜ë¯€ë¡œ í° ë¹„ìš©ì´ ë°œìƒí•œë‹¤.

í•´ë‹¹ ë¬¸ì œë¥¼ ëŒ€ì²˜í•˜ëŠ”ë° ë‘ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤.

- í”íˆ ì“°ì´ëŠ” ë‹¤ë‹¨ê³„ ì—°ì‚°ë“¤ì„ ë¯¸ë¦¬ ì˜ˆì¸¡í•˜ì—¬ ê¸°ë³¸ ê¸°ëŠ¥ìœ¼ë¡œ ì œê³µí•œë‹¤.
  - ë‹¨ê³„ ë³„ë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ë‚­ë¹„ë˜ëŠ” ìì›ì„ ìµœì†Œí™” í•  ìˆ˜ ìˆë‹¤.
- ê°€ë³€ ë™ë°˜ í´ë˜ìŠ¤ë¥¼ í•¨ê»˜ êµ¬ì„±í•œë‹¤.
  - (ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ) ì—°ì‚°ì„ ë•ëŠ” ê°€ë³€ ë™ë°˜ í´ë˜ìŠ¤ë¥¼ í•¨ê»˜ êµ¬ì„±í•˜ì—¬ ì„±ëŠ¥ì„ ë†’ì¸ë‹¤.
  - `String` í´ë˜ìŠ¤ì˜ ê°€ë³€ ë™ë°˜ í´ë˜ìŠ¤ëŠ” `StringBuilder` ë‹¤.

## ê°ì²´ë¥¼ ì‹ ë¢°í•  ìˆ˜ ì—†ëŠ” ê²½ìš° ë°©ì–´ì  ë³µì‚¬ë¥¼ ì‚¬ìš©í•˜ì.

ì‹ ë¢°í•  ìˆ˜ ì—†ëŠ” í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ê°ì²´ë¥¼ ì¸ìˆ˜ë¡œ ë°›ì„ ë•Œ í•„ìš”í•˜ë‹¤ë©´ ë°©ì–´ì ìœ¼ë¡œ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•´ì•¼í•œë‹¤.

(ex. ì¸ìˆ˜ë¡œ ë°›ëŠ” ê°ì²´ê°€ ë°˜ë“œì‹œ ë¶ˆë³€ì´ì–´ì•¼ í•  ê²½ìš°)

```java
public static BigInteger safeInstance(BigInteger val) {
  return val.getClass() == BigInteger.class ? val : new BigInteger(val.toByteArray());
}
```

## ë¶ˆë³€ ê°ì²´ë¥¼ ìƒì†í•˜ì§€ ëª»í•˜ê²Œ í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•

ìƒì„±ìë¥¼ `private`(`package-private`)ìœ¼ë¡œ êµ¬ì„±í•˜ê³  `public` ì •ì  íŒ©í„°ë¦¬ë¥¼ ì œê³µí•˜ë©´ ëœë‹¤.

```java
private Complex(double re, double im) {
    this.re = re;
    this.im = im;
}

public static Complex valueOf(double re, double im) {
    return new Complex(re, im);
}
```

ì´ë ‡ê²Œ êµ¬ì„±í•¨ìœ¼ë¡œì¨ í™•ì¥ì˜ ê°€ëŠ¥ì„±ì„ ì™„ë²½í•˜ê²Œ ì°¨ë‹¨í• ìˆ˜ ìˆê³  ë™ì‹œì— ìœ ì—°ì„±ì„ ì œê³µí•œë‹¤.

## ì •ë¦¬

- `Getter`ê°€ ìˆë‹¤ê³  í•´ì„œ ë°˜ë“œì‹œ `Setter`ë¥¼ ì œê³µí•  í•„ìš”ëŠ” ì—†ë‹¤.
- í´ë˜ìŠ¤ëŠ” ê¼­ í•„ìš”í•œ ê²½ìš°ê°€ ì•„ë‹ˆë©´ ë¶ˆë³€ì´ì–´ì•¼ í•œë‹¤.
- ëª¨ë“  í´ë˜ìŠ¤ë¥¼ ë¶ˆë³€ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ëŠ” ì—†ì§€ë§Œ ê·¸ë ‡ë”ë¼ë„ ë³€ê²½ ê°€ëŠ¥í•œ ë¶€ë¶„ì„ ìµœì†Œí•œìœ¼ë¡œ ì¤„ì´ì.
  - ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ì¤„ì„ìœ¼ë¡œì¨ ì˜¤ë¥˜ê°€ ìƒê¸¸ ê°€ëŠ¥ì„±ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.
- í•©ë‹¹í•œ ì´ìœ ê°€ ì—†ë‹¤ë©´ ëª¨ë“  í•„ë“œëŠ” `private final`ë¡œ êµ¬ì„±í•˜ì.
- ìƒì„±ìì˜ ê²½ìš°, ë‚´ë¶€ í•„ë“œë¥¼ í¬í•¨í•˜ì—¬ ì´ˆê¸°í™”ê°€ ì™„ë²½íˆ ëë‚œ ìƒíƒœì˜ ê°ì²´ë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤.
  - ê·¸ ì™¸ì—ëŠ” `public`ìœ¼ë¡œ ì œê³µí•´ì„œëŠ” ì•ˆëœë‹¤.


## ğŸ“£ Reference

[Effective Java 3/E - Joshua J. Bloch](http://www.yes24.com/Product/Goods/65551284)<br/>
[WegraLee/effective-java-3e-source-code](https://github.com/WegraLee/effective-java-3e-source-code/tree/master/src/effectivejava/chapter4/item17)<br/>