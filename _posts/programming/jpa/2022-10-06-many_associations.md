---
title: "ì—°ê´€ê´€ê³„ ë§¤í•‘ - ë‹¤ì–‘í•œ ì—°ê´€ê´€ê³„"
categories: 
    - jpa
date: 2022-10-06
last_modified_at: 2022-10-11
# tags:
#     - íƒœê·¸1
#     - íƒœê·¸2
#     - tag_test..
toc: true
toc_sticky: true
# toc_label: "MYSELF"
excerpt: "ë‹¤ì–‘í•œ ì—°ê´€ê´€ê³„ë¥¼ ì•Œì•„ë³´ì"
---

## ì—°ê´€ê´€ê³„ ë§¤í•‘ì‹œ ê³ ë ¤ì‚¬í•­

- `@JoinColumn`
  - |ì†ì„±|ì„¤ëª…|ê¸°ë³¸ê°’|
  |---|---|---|
  |name|ë§¤í•‘í•  ì™¸ë˜ í‚¤ ì´ë¦„|í•„ë“œëª… + _ + ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ ì»¬ëŸ¼ëª…|
  |referencedColumnName|ì™¸ë˜ í‚¤ê°€ ì°¸ì¡°í•˜ëŠ” ëŒ€ìƒ í…Œì´ë¸”ì˜ ì»¬ëŸ¼ëª…|ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ ì»¬ëŸ¼ëª…||
  |foreignKey(DDL)|ì™¸ë˜ í‚¤ ì œì•½ì¡°ê±´ì„ ì§ì ‘ ì§€ì •í•  ìˆ˜ ìˆë‹¤. ì´ ì†ì„±ì€ í…Œì´ë¸”ì„ ìƒì„±í•  ë•Œë§Œ ì‚¬ìš©í•œë‹¤.||
  |unique, nullable, insertable, updatable, columnDefinition, table|@Columnì˜ ì†ì„±ê³¼ ê°™ë‹¤.||

- ë‹¤ì¤‘ì„±
  - 1:N(`@OneToMany`)
  - N:1(`@ManyToOne`)
  - 1:1(`@OneToOne`)
  - N:M(`@ManyToMany`)
    - ê¶Œì¥í•˜ì§€ ì•ŠìŒ.

- ë‹¨ë°©í–¥, ì–‘ë°©í–¥
  - í…Œì´ë¸”
    - ì™¸ë˜í‚¤ í•˜ë‚˜ë¡œ ì–‘ìª½ ì¡°ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.
    - ë°©í–¥ì´ë¼ëŠ” ê°œë… X
  - ê°ì²´
    - ì°¸ì¡°ìš© í•„ë“œê°€ ìˆëŠ” ìª½ìœ¼ë¡œë§Œ ì°¸ì¡° ê°€ëŠ¥
    - í•œìª½ë§Œ ì°¸ì¡°í•˜ë©´ ë‹¨ë°©í–¥
    - ì–‘ìª½ì´ ì„œë¡œ ì°¸ì¡°í•˜ë©´ ì–‘ë°©í–¥

- ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸
  - í…Œì´ë¸”ì€ ì™¸ë˜í‚¤ í•˜ë‚˜ë¡œ ë‘ í…Œì´ë¸”ì´ ì—°ê´€ê´€ê³„ë¥¼ ë§ºìŒ.
  - ê°ì²´ ì–‘ë°©í–¥ ê´€ê³„ëŠ” A -> B, B -> A ì²˜ëŸ¼ ì°¸ì¡°ê°€ 2êµ°ë°ì„.
  - ê°ì²´ ì–‘ë°©í–¥ ê´€ê³„ëŠ” ì°¸ì¡°ê°€ 2êµ°ë°ìˆìŒ. ë‘˜ì¤‘ í…Œì´ë¸”ì˜ ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬í•  ê³³ì„ ì§€ì •í•´ì•¼í•¨.
  - ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ : ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ì°¸ì¡°
  - ì£¼ì¸ì˜ ë°˜ëŒ€í¸ : ì™¸ë˜í‚¤ì— ì˜í–¥ì„ ì£¼ì§€ì•Šê³  ë‹¨ìˆœ ì¡°íšŒë§Œ (read-only)

## ë‹¤ëŒ€ì¼ (N:1)

ë‹¤ëŒ€ì¼ì˜ ê´€ê³„ì—ì„œ ë‹¤(N)ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì„¤ì •í•œë‹¤.

- `@ManyToOne`
  - |ì†ì„±|ì„¤ëª…|ê¸°ë³¸ê°’|
  |---|---|---|
  |optional|falseë¡œ ì„¤ì •í•˜ë©´ ì—°ê´€ëœ ì—”í‹°í‹°ê°€ í•­ìƒ ìˆì–´ì•¼ í•œë‹¤.|TRUE|
  |fetch|ê¸€ë¡œë²Œ í˜ì¹˜ ì „ëµì„ ì„¤ì •í•œë‹¤.|`@ManyToOne`=FetchType.EAGER, `@OneToMany`=FetchType.LAZY|
  |cascade|ì˜ì†ì„± ì „ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤.||
  |targetEntity|ì—°ê´€ëœ ì—”í‹°í‹°ì˜ íƒ€ì… ì •ë³´ë¥¼ ì„¤ì •í•œë‹¤. ì´ ê¸°ëŠ¥ì€ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ì»¬ë ‰ì…˜ì„ ì‚¬ìš©í•´ë„ ì œë„¤ë¦­ìœ¼ë¡œ íƒ€ì… ì •ë³´ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.||


- ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥
  - ![image](https://user-images.githubusercontent.com/36228833/194346109-b38a9955-1d7a-45f4-8339-9c79bff2f259.png)
  - ì„¤ê³„ ì˜ë„
    - `Member`ê°€ ì†í•œ `Team`ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ê³  ì‹¶ì„ ë•Œ
  - DB ì…ì¥ì—ì„  Memberì™€ Teamì˜ ê´€ê³„ê°€ N:1ì´ë¯€ë¡œ ì™¸ë˜í‚¤ê°€ Memberìª½ì— ì†í•œë‹¤.
    - Nìª½ì— í•­ìƒ ì™¸ë˜í‚¤ê°€ ì¡´ì¬í•´ì•¼í•¨.
  - ê°ì²´ ì…ì¥ì—ì„  **ì™¸ë˜í‚¤ê°€ ì¡´ì¬í•˜ëŠ” ì—”í‹°í‹°ì— ì°¸ì¡°ìš© í•„ë“œë¥¼ ë§Œë“¤ì–´ì„œ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •**í•˜ë©´ ëœë‹¤.
    ```java
    @Entity
    public class Member {
      ...
      @ManyToOne
      @JoinColumn(name = "TEAM_ID")
      private Team team;
    }
    ```

- ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥
  - ![image](https://user-images.githubusercontent.com/36228833/194346248-7ab7820b-90d4-47c3-a5b8-0a4f6c3d2472.png)
  - ì„¤ê³„ ì˜ë„
    - `Member` ì…ì¥ì—ì„œ `Member`ê°€ ì†í•œ `Team`ë„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•  ìˆ˜ ìˆê³ 
    - `Team` ì…ì¥ì—ì„œ `Team`ì— ì†í•œ `Member`ë“¤ì„ ì¡°íšŒí•´ì•¼ í•  ë•Œ
  - ì—°ê´€ê´€ê³„ ì£¼ì¸ìœ¼ë¡œ ì„¤ì •ëœ **ë°˜ëŒ€í¸ì— ì°¸ì¡°ìš© ê°ì²´ë¥¼ ìƒì„±**í•˜ì—¬ ì´ì–´ì£¼ë©´ ëœë‹¤.
    ```java
    @Entity
    public class Team {
      ...
      @OneToMany(mappedBy = "team")
      private List<Member> members = new ArrayList<>();
    }
    ```
  - ë°˜ëŒ€ìª½ì— ì°¸ì¡°ìš© ê°ì²´ë¥¼ ì¶”ê°€í•œë‹¤ê³  í•´ë„ í…Œì´ë¸”ì— ì˜í–¥ì„ ì£¼ì§€ì•ŠëŠ”ë‹¤.
    - ì–´ì°¨í”¼ read-only ì´ë¯€ë¡œ
  - **ì™¸ë˜í‚¤ê°€ ìˆëŠ” ìª½**ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ë‹¤.
  - ì–‘ìª½ì„ ì„œë¡œ ì°¸ì¡°í•˜ë„ë¡ ê°œë°œí•œë‹¤.

ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ì—°ê´€ê´€ê³„ì´ë©° **ë‹¤ëŒ€ì¼**ì˜ ë°˜ëŒ€ëŠ” **ì¼ëŒ€ë‹¤** ì´ë‹¤.

## ì¼ëŒ€ë‹¤ (1:N)

ì¼ëŒ€ë‹¤ì˜ ê´€ê³„ì—ì„œ ì¼(1)ì„ ì—°ê´€ê´€ê³„ ì£¼ì¸ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

- `@OneToMany`
  - |ì†ì„±|ì„¤ëª…|ê¸°ë³¸ê°’|
  |---|---|---|
  |mappedBy|ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ í•„ë“œë¥¼ ì„ íƒí•œë‹¤.||
  |fetch|ê¸€ë¡œë²Œ í˜ì¹˜ ì „ëµì„ ì„¤ì •í•œë‹¤.|`@ManyToOne`=FetchType.EAGER, `@OneToMany`=FetchType.LAZY|
  |cascade|ì˜ì†ì„± ì „ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤.||
  |targetEntity|ì—°ê´€ëœ ì—”í‹°í‹°ì˜ íƒ€ì… ì •ë³´ë¥¼ ì„¤ì •í•œë‹¤. ì´ ê¸°ëŠ¥ì€ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ì»¬ë ‰ì…˜ì„ ì‚¬ìš©í•´ë„ ì œë„¤ë¦­ìœ¼ë¡œ íƒ€ì… ì •ë³´ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.||

- ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥
  - ![image](https://user-images.githubusercontent.com/36228833/194346363-a2626a73-639e-4ead-9603-637e069bf26d.png)
  - ì„¤ê³„ ì˜ë„
    - `Team`ì€ `Team`ì— ì†í•œ `Member`ë“¤ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ê³  ì‹¶ì„ ë•Œ

  - 1ì˜ ì…ì¥ì¸ `Team`ì—ì„œ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì„ ê´€ë¦¬
    ```java
    @Entity
    public class Team {
      ...
      @OneToMany
      @JoinColumn(name = "TEAM_ID")
      private List<Member> members = new ArrayList<>();
    }

    ...
    // ì˜ˆì œ
    Member member = new Member();
    member.setUsername("member1");

    em.persist(member);

    Team team = new Team();
    team.setName("teamA");
    team.getMembers().add(member);  // ì—°ê´€ê´€ê³„ ì£¼ì¸ í™œìš©

    em.persist(team);
    ```
  - ì¼ë°˜ì ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ” `insert` ì¿¼ë¦¬ì— ì¶”ê°€ë¡œ `update` ì¿¼ë¦¬ê°€ ì‹¤í–‰ ëœë‹¤.
    - team ì—”í‹°í‹°ë¥¼ ì €ì¥í–ˆì§€ë§Œ ì—°ê´€ ê´€ê³„ëŠ” ë°˜ëŒ€í¸(Member) í…Œì´ë¸”ì„ ê°€ë¦¬í‚¤ê³  ìˆìœ¼ë¯€ë¡œ ë°˜ëŒ€í¸ í…Œì´ë¸”ì˜ `update` ì¿¼ë¦¬ê°€ í•œë²ˆ ë” ì‹¤í–‰ë¨
    - ì˜ë„í•˜ì§€ ì•Šì€ ì¿¼ë¦¬ê°€ ìˆ˜í–‰ë˜ë¯€ë¡œ **ë³µì¡ë„ê°€ ì˜¬ë¼ê°€ë©° ë° ì„±ëŠ¥ìƒ ì¢‹ì§€ ì•Šë‹¤.**

  - í…Œì´ë¸” ì¼ëŒ€ë‹¤ ê´€ê³„ëŠ” í•­ìƒ ë‹¤(N) ìª½ì— ì™¸ë˜í‚¤ê°€ ìˆìŒ.
  - ê°ì²´ì™€ í…Œì´ë¸”ì˜ ì°¨ì´ ë•Œë¬¸ì— **ë°˜ëŒ€í¸ í…Œì´ë¸”ì˜ ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬**í•˜ëŠ” íŠ¹ì´í•œ êµ¬ì¡°ê°€ ëœë‹¤.
  - `@JoinColumn`ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì¡°ì¸ í…Œì´ë¸” ë°©ì‹ì„ ì‚¬ìš©í•˜ë¯€ë¡œ `@JoinColumn`ì„ ê¼­ ì¨ì•¼í•œë‹¤.
    - ì¡°ì¸ í…Œì´ë¸” ë°©ì‹ : ì—°ê´€ê´€ê³„ë¥¼ ìœ„í•´ ë‘ í…Œì´ë¸” ì‚¬ì´ì— ì¤‘ê°„ í…Œì´ë¸”ì„ ìƒì„±í•˜ì—¬ ë§¤í•‘í•œë‹¤ (ì¢‹ì§€ ì•ŠìŒ)
  - ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ ë§¤í•‘ë³´ë‹¤ëŠ” **ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ë§¤í•‘ì„ ì‚¬ìš©**í•˜ì!

- ì¼ëŒ€ë‹¤ ì–‘ë°©í–¥
  - ![image](https://user-images.githubusercontent.com/36228833/194356306-82ef8c6e-6947-4bbc-affb-b16e0d4eeecb.png)
  - ì„¤ê³„ ì˜ë„
    - `Team`ì€ `Team`ì— ì†í•œ `Member`ë“¤ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ê³  ì‹¶ê³ 
    - `Member`ëŠ” `Member`ê°€ ì†í•œ íŒ€ì„ ì¡°íšŒí•˜ê³  ì‹¶ì„ ë•Œ
  - ê³µì‹ ìŠ¤í™ìƒìœ¼ë¡œ ì§€ì›í•˜ì§€ ì•Šìœ¼ë‚˜ ì•¼ë§¤ ë°©ì‹(insertable, updatable ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬ ì½ê¸°ì „ìš© í•„ë“œë¡œ ë§Œë“¬)ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ
    ```java
    @Entity
    public class Member {
      ...
      @ManyToOne
      @JoinColumn(name="TEAM_ID", insertable=false, updatable=false)
      private Team team;
    }
    ```
  - `@JoinColumn`ì˜ ì†ì„±ìœ¼ë¡œ í•´ë‹¹ í•„ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ëª»í•˜ê²Œ ë§Œë“¦ìœ¼ë¡œ ì¨ read-onlyë¡œ ë§Œë“¬ (ì–‘ë°©í–¥ ë§¤í•‘ êµ¬í˜„)
  - **ë³µì¡í•˜ê²Œ í•˜ì§€ë§ê³  ê¹”ë”í•˜ê²Œ ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ì„ ì‚¬ìš©í•˜ì.**

## ì¼ëŒ€ì¼ (1:1)

- **ì£¼ í…Œì´ë¸”**ì´ë‚˜ **ëŒ€ìƒ í…Œì´ë¸”** ì¤‘ì— ì™¸ë˜í‚¤ ì„ íƒ ê°€ëŠ¥í•˜ë‹¤.
  - ì£¼ í…Œì´ë¸”ì— ì™¸ë˜í‚¤
  - ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ë˜í‚¤
- ì™¸ë˜í‚¤ì— ë°ì´í„°ë² ì´ìŠ¤ ìœ ë‹ˆí¬ ì œì•½ì¡°ê±´ì„ ì¶”ê°€í•´ì•¼ í•¨.

- ì£¼ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ - ë‹¨ë°©í–¥
  - ![image](https://user-images.githubusercontent.com/36228833/194869769-48974508-b8be-41d9-9907-0f2d3da22768.png)
  - ì„¤ê³„ ì˜ë„
    - ê° `Member`(ì£¼ í…Œì´ë¸”)ëŠ” ë½ì»¤ë¥¼ í•˜ë‚˜ ì†Œìœ í•  ìˆ˜ ìˆë‹¤.
    - ë‹¤ëŒ€ì¼(`@ManyToOne`) ë‹¨ë°©í–¥ ë§¤í•‘ê³¼ ìœ ì‚¬í•¨
      ```java
      @Entity
      public class Locker {
        @Id @GeneratedValue
        private Lond id;

        private String name;
      }

      @Entity 
      public class Member {

        @Id @GeneratedValue
        private Long id;

        @OneToOne
        @JoinColumn(name = "LOCKER_ID")
        private Locker locker;

        private String username;
      }
      ```
  - ì¶”í›„ì— í•˜ë‚˜ì˜ `Locker`ë¥¼ ì—¬ëŸ¬ëª…ì˜ `Member`ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ (ë‹¤ëŒ€ì¼) ê´€ê³„ë¥¼ í™•ì¥í•  ìˆ˜ ìˆë‹¤. (DB ì…ì¥)
  - `Member`ì— `Locker`ê°€ ìˆëŠ”ê²Œ ì„±ëŠ¥ìƒìœ¼ë¡œ ìœ ë¦¬í•˜ë‹¤
    - ex) `Member`ê°€ ì£¼ í…Œì´ë¸”ì´ê¸° ë•Œë¬¸ì— `Member` ì¡°íšŒëŠ” í•„ìˆ˜ì ì´ë‹¤. `Member`ê°€ ê°€ì§„ `Locker` ì •ë³´ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ êµ³ì´ `Locker`ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•œë²ˆ ë” ì¡°íšŒí•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

- ì£¼ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ - ì–‘ë°©í–¥
  - ![image](https://user-images.githubusercontent.com/36228833/194869818-a3dbda19-0018-49f0-9d9a-3d848a33aaac.png)
  - ì„¤ê³„ ì˜ë„
    - ê° `Member`ëŠ” ë½ì»¤ë¥¼ í•˜ë‚˜ ì†Œìœ í•  ìˆ˜ ìˆê³ 
    - `Locker` ëŠ” ìì‹ ì„ ì†Œìœ í•œ `Member`ë¥¼ ì•Œìˆ˜ìˆìŒ.
      ```java
        @Entity
        public class Locker {
          @Id @GeneratedValue
          private Lond id;

          private String name;

          @OneToOne(mappedBy= "locker")
          private Member member;

        }

        @Entity 
        public class Member {

          @Id @GeneratedValue
          private Long id;

          @OneToOne
          @JoinColumn(name = "LOCKER_ID")
          private Locker locker;

          private String username;
        }
        ```
  - ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ë§¤í•‘ì²˜ëŸ¼ **ì™¸ë˜í‚¤ê°€ ìˆëŠ”ê³³ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸**
    - ì˜ˆì œì—ì„  `Member`ê°€ ì£¼ì¸
  - ë°˜ëŒ€í¸ì€ `mappedBy`ë¥¼ ì ìš©

- **ì£¼ í…Œì´ë¸” ì™¸ë˜í‚¤ ì •ë¦¬**
  - ì£¼ ê°ì²´ê°€ ëŒ€ìƒ ê°ì²´ì˜ ì°¸ì¡°ë¥¼ ê°€ì§€ëŠ” ê²ƒ ì²˜ëŸ¼ ì£¼ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ë¥¼ ë‘ê³  ëŒ€ìƒ í…Œì´ë¸”ì„ ì°¾ëŠ”ë‹¤.
  - **ê°ì²´ì§€í–¥ ê°œë°œì**ê°€ ì„ í˜¸í•œë‹¤.
  - JPA ë§¤í•‘ì´ í¸ë¦¬í•˜ë‹¤.
  - ì¥ì  : ì£¼ í…Œì´ë¸”ë§Œ ì¡°íšŒí•´ë„ (ì™¸ë˜í‚¤ë¡œ) ëŒ€ìƒ í…Œì´ë¸”ì— ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤. (ì„±ëŠ¥ìƒ ìœ ë¦¬)
  - ë‹¨ì  : ê°’ì´ ì—†ìœ¼ë©´ ì™¸ë˜í‚¤ì— nullì„ í—ˆìš©í•œë‹¤.

- ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ - ë‹¨ë°©í–¥ (ë¶ˆê°€ëŠ¥)
  - ![image](https://user-images.githubusercontent.com/36228833/194869880-b9db37f7-087f-4725-a244-4f11b3263c67.png)
  - `Member` ì—”í‹°í‹°ì˜ `locker`ê°€ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì„¤ì •í•˜ê³  ì‹¶ìœ¼ë‚˜ ì™¸ë˜í‚¤ëŠ” `LOCKER`ì— ìˆëŠ” ìƒí™©
  - ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ ê°™ì€ ìƒí™©
  - JPAì—ì„œ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. 

- ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ - ì–‘ë°©í–¥
  - ![image](https://user-images.githubusercontent.com/36228833/194869936-a8adcd67-1ba7-4145-b7e7-f6b3c2ef8f36.png)
  - `Locker`ì— ìˆëŠ” `member`ë¥¼ ì—°ê´€ê´€ê³„ ì£¼ì¸ìœ¼ë¡œ ì„¤ì •í•˜ê³  (`LOCKER` í…Œì´ë¸”ì— ì™¸ë˜í‚¤ê°€ ìˆìœ¼ë¯€ë¡œ) ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •
    - ë°˜ëŒ€í¸ì¸ `Member`ì˜ `locker`ë¥¼ ì½ê¸° ì „ìš©ìœ¼ë¡œ ì„¤ì • 
  - ì‚¬ì‹¤ ì£¼ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ ì–‘ë°©í–¥ê³¼ ë§¤í•‘ ë°©ë²•ì€ ë™ì¼í•˜ë‹¤.

- **ëŒ€ìƒ í…Œì´ë¸” ì™¸ë˜í‚¤ ì •ë¦¬**
  - ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ê°€ ì¡´ì¬í•œë‹¤. (null í—ˆìš© ë¬¸ì œ í•´ê²°)
  - **ì „í†µì ì¸ ë°ì´í„°ë² ì´ìŠ¤ ê°œë°œì**ë“¤ì´ ë§ì´ ì„ í˜¸í•œë‹¤.
  - ì¥ì  : ì£¼ í…Œì´ë¸”ê³¼ ëŒ€ìƒ í…Œì´ë¸”ì„ **ì¼ëŒ€ì¼ì—ì„œ ì¼ëŒ€ë‹¤ ê´€ê³„ë¡œ ë³€ê²½í•  ë•Œ í…Œì´ë¸” êµ¬ì¡°ê°€ ìœ ì§€**ëœë‹¤. (í™•ì¥ì— ìœ ë¦¬)
  - ë‹¨ì  : í”„ë¡ì‹œ ê¸°ëŠ¥ì˜ í•œê³„ë¡œ **ì§€ì—° ë¡œë”©ìœ¼ë¡œ ì„¤ì •í•´ë„ í•­ìƒ ì¦‰ì‹œ ë¡œë”©ëœë‹¤.**
    - JPA ì…ì¥ì—ì„œëŠ” `Member` ê°ì²´ë¥¼ ë¡œë”©í•  ë•Œ ì™¸ë˜í‚¤ ëŒ€ìƒì¸ `locker`ì— ê°’ì´ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ ì•Œì•„ì•¼í•¨.
    - ê·¸ëŸ¬ë‚˜ ì™¸ë˜í‚¤ëŠ” ë°˜ëŒ€í¸ì¸ `LOCKER`ê°€ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— `MEMBER` í…Œì´ë¸” ë§ê³ ë„ `LOCKER` í…Œì´ë¸”ê¹Œì§€ ì „ë¶€ ì¡°íšŒ í•´ë´ì•¼í•¨.
    - ê²°êµ­ **ì£¼ í…Œì´ë¸” ê³¼ ëŒ€ìƒ í…Œì´ë¸” ë‘˜ë‹¤ í™•ì¸í•˜ëŠ” ê³¼ì •ì„ í•„íˆ ê±°ì¹˜ë¯€ë¡œ** ì§€ì—° ë¡œë”©ì´ ì•„ë¬´ ì˜ë¯¸ ì—†ìŒ. (ê·¸ë˜ì„œ í•­ìƒ ì¦‰ì‹œ ë¡œë”©ì´ ë¨)
      - ì§€ì—° ë¡œë”© : ì‹¤ì œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‹œì ì— ì¡°íšŒ
      - ì¦‰ì‹œ ë¡œë”© : Joinì„ í™œìš©í•˜ì—¬ ì—°ê´€ëœ ê°ì²´ê¹Œì§€ í•œë²ˆì— ì¡°íšŒ

## ë‹¤ëŒ€ë‹¤ (N:M) - ê¶Œì¥í•˜ì§€ ì•ŠìŒ
- ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤
  - ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì •ê·œí™”ëœ í…Œì´ë¸” 2ê°œë¡œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ í‘œí˜„í•  ìˆ˜ ì—†ë‹¤.
  - ì—°ê²° í…Œì´ë¸”ì„ ì¶”ê°€í•´ì„œ ì¼ëŒ€ë‹¤ - ë‹¤ëŒ€ì¼ ê´€ê³„ë¡œ í’€ì–´ë‚´ì•¼ í•¨.
  - ![image](https://user-images.githubusercontent.com/36228833/195121179-829975c9-6b7d-434f-8f18-616d43412172.png)

- ê°ì²´
  - ê°ì²´ëŠ” ì»¬ë ‰ì…˜ì„ ì‚¬ìš©í•´ì„œ ê°ì²´ 2ê°œë¡œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ê°€ ê°€ëŠ¥í•˜ë‹¤.
  - ![image](https://user-images.githubusercontent.com/36228833/195121258-b31df0f6-a376-489f-b365-e6088f8bcbe0.png)
  - ë‹¨ë°©í–¥, ì–‘ë°©í–¥ ë‘˜ë‹¤ ê°€ëŠ¥í•˜ë‹¤.
  - `@ManyToMany`ë¥¼ ì‚¬ìš©í•œë‹¤.
  - `@JoinTable`ë¡œ ì—°ê²° í…Œì´ë¸”ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
    ```java
    @Entity
    public class Product {
      @Id @GeneratedValue
      private Long id;

      private String name;

      @ManyToMany(mappedBy = "products")
      private List<Member> members = new ArrayList<>();
      // getter, setter
    }

    @Entity
    public class Member {
      @Id @GeneratedValue
      private Long id;

      private String name;

      @ManyToMany
      @JoinTable(name = "MEMBER_PRODUCT")
      private List<Product> products = new ArrayList<>();
      // getter, setter
    }
    ```

- ë‹¤ëŒ€ë‹¤ ë§¤í•‘ì˜ í•œê³„
  - ![image](https://user-images.githubusercontent.com/36228833/195121328-5a560d97-34d3-4298-afe0-dda3ee4a4b10.png)
  - í¸ë¦¬í•´ ë³´ì´ì§€ë§Œ ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ë©´ ì•ˆë¨.
  - ì—°ê²° í…Œì´ë¸”ì´ ë‹¨ìˆœíˆ ì—°ê²°ë§Œ í•˜ê³  ëë‚˜ì§€ ì•Šê¸° ë•Œë¬¸
  - ì£¼ë¬¸ì‹œê°„, ìˆ˜ëŸ‰ ê°™ì€ ë°ì´í„°ê°€ ë“¤ì–´ì˜¬ ìˆ˜ ìˆìŒ.
    - ë§¤í•‘ ì •ë³´ë§Œ ìˆì–´ì•¼ í•¨.
  - ì¤‘ê°„ì— ì—°ê²° í…Œì´ë¸”ì´ ì¡´ì¬í•´ì„œ ì¿¼ë¦¬ë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ì—†ìŒ

- ë‹¤ëŒ€ë‹¤ ë§¤í•‘ ê·¹ë³µ
  - ![image](https://user-images.githubusercontent.com/36228833/195121426-b95fb469-b3b4-4b95-b475-4c8f4bd02618.png)
  - ì—°ê²° í…Œì´ë¸” ìš© ì—”í‹°í‹°ë¥¼ ì¶”ê°€ (ì—°ê²° í…Œì´ë¸”ì„ ì—”í‹°í‹°ë¡œ ìŠ¹ê²©)
  - `@ManyToMany` -> `@OneToMany`, `@ManyToOne`
  ```java
    @Entity
    public class Product {
      @Id @GeneratedValue
      private Long id;

      private String name;

      @OneToMany(mappedBy = "product")
      private List<MemberProduct> memberProducts = new ArrayList<>();
      // getter, setter
    }

    @Entity
    public class MemberProduct {
      @Id @GeneratedValue
      private Long id;

      @ManyToOne
      @JoinColumn(name = "MEMBER_ID")
      private Member member;

      @ManyToOne
      @JoinColumn(name = "PRODUCT_ID")
      private Product product;
    }

    @Entity
    public class Member {
      @Id @GeneratedValue
      private Long id;

      private String name;

      @OneToMany(mappedBy = "member")
      private List<MemberProduct> memberProducts = new ArrayList<>();
      // getter, setter
    }
    ```


## ğŸ“£ Reference
ë³¸ í¬ìŠ¤íŒ…ì€ ê¹€ì˜í•œë‹˜ì˜ ê°•ì˜ë¥¼ ë“£ê³  ìŠ¤ìŠ¤ë¡œ ì •ë¦¬ ë° ì¶”ê°€í•œ ë‚´ìš©ì…ë‹ˆë‹¤.

[ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë° - ê¸°ë³¸í¸](https://www.inflearn.com/course/ORM-JPA-Basic/dashboard)<br/>
